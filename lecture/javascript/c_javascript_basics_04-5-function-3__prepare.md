# javascript 기초_4-4 함수3

지난시간에는 함수의 정의와 종류 및 용어들에 대해 알아보았습니다.
이번시간은 지난시간에 이어서 함수의 종류와 그 기능들에 대해 배워보겠습니다.

---

[TOC]

---

## 함수의 종류

- [익명함수](#noneName)
- 재귀함수
- [중첩함수](#innerFn)
- [콜백함수(call back)](#callBack)
- **즉시 실행 함수** (**IIFE**: Immediately Invoked Function Expressions)
- 클로저(**closure**)
- 내장함수

---

### 익명함수<div id="noneName"></div>

함수 리터럴을 이용해 정의된 함수를 익명함수 라고 합니다.
함수의 이름이 없기 때문에 익명함수라고 불리우고 있으며, 
주로 변수에 할당되거나 함수 인자의 값 또는 반환값으로 사용되어 집니다.

함수표현식에 사용하는 함수가 대부분이 익명함수입니다.

```javascript
var NoNameFn = function(){
  var fnName = '함수의 이름이 정의되지 않았으므로, 호출된 함수는 익명함수 입니다.';
  return fnName;
};

console.log( NoNameFn() );
```

---

### 중첩함수<div id="innerFn"></div>

```javascript
function example(){
  var  a = 1;
  function oneMore(){
    return a + 1;
  }
  return oneMOre();
}
```

 위 코드는 함수 **내부에 또다른 함수를 사용하여 중첩처리하는 형태**입니다.
주로 특정 함수에서만 사용할 기능을 외부에 노출시키지 않고 내부에 정의해서 사용할 경우에 많이 사용하는 방법입니다.

변수는 지역변수 및 전역변수 등이 존재합니다.
이는 각 변수의 영역(**scope**)이 존재하고, 해당영역은 함수의 구분으로 이루어지게되는데 
이때 내부에 존재하는 함수를 별도로 참조하거나 할수 있습니다.

이를 활용하여 **객체지향의 캡슐화, 은닉화** 등으로 처리할 수 있는 방법들이 될 수 있습니다.

즉, 전역 변수 이름공간을 과도하게 사용하지 않고 연관된 함수를 묶어 처리할수 있는 것 입니다.
이는 전역 범위의 함수의 수를 낮게 유지할 수 있는 방법 중의 하나입니다.

---

### 콜백함수<div id="callBack"></div>

[콜백함수](https://opentutorials.org/module/532/6508)
자바스크립트에서 가장 많이 사용하는 기법중에 하나가 바로 콜백함수 입니다.
콜백함수는 [jQuery](http://jquery.com)나 각종 자바스크립트 라이브러리등에서 많이 사용되고 있습니다.

콜백함수의 가장 중요한 핵심 중에 하나는 **함수를 인자로 넘겨사용한다** 입니다.

```javascript
function doFn(callback){
    // doFn 에서 실행 될 내용들
    var a = 1;
    var b = 1;
    var c = a + b;
     
    alert('doFn 에서 실행 될 내용이 실행된다.');
 
    // doFn에서 실행 될 내용들 실행 후 인자값으로 받은 callback을 실행
    // 넘겨받은 callback이 함수이기 때문에 실행 가능.
    // 이때 c 값을 인자값으로 넘겨준다.
    if(typeof callback === 'function') {
        callback(c);
    }
}
```

위 내용은 함수 `doFn`을 생성 후 
함수내부에 변수 `a, b, c`를 생성하고, 
어떠한 조건을 준비하여 확인하도록 처리한 값 입니다.

실제로 `doFn();`을 입력하여 함수를 호출하여도 메세지 창 하나만 뜰 뿐 입니다.
하지만 `doFn();`에는 인자값을  추가로 담을 수 있도록 짜여진 상태 입니다.

```javascript
// 먼저 doFn 실행 시키고 callback 함수에 의해 function 안의 내용이 실행
doFn(function(msg){
    // doFn 함수의 호출에 의해서 실행된다.
    // 인자값으로 받은 c값을 msg 로 받는다.
    alert('callback 함수의 실행 될 내용');
    alert('c 의 값은? ' + msg);
});
```

다소 복잡해 보이지만 나타나는 메세지창과 
내용의 흐름을 익혀서 이해해 보도록 하겠습니다.

위 내용은 함수 `doFn();`를 호출하고, 해당함수의 인자값으로
 별도의 함수`function(msg){}`를 생성하여 담은 형태 입니다.

- 콜백함수는 **A**에 있는 함수를 다른곳에 전달하여 다른곳에서 **A** 의 함수를 호출하는 법 입니다.

다소 복잡하고 어려운 내용일 수 있습니다.
하지만 콜백함수의 내용을 잘 이해한다면 jQuery 뿐아니라 
다양한 라이브러리내용을 이해할 수 있고, 
중요한 자료를 캡슐, 은닉화 처리할 수 있다는 장점이 생겨지게 됩니다.
또한 차후 익히게 될 [node.js](nodejs.org) 내용에서 자주 사용하고 있기 때문에 
기초 지식으로써 꾸준이 이해해야 합니다.

콜백함수를 사용하면 클로저 라는 단어도 자주 접하게 됩니다.
클로저의 관련내용은 차후에 다시 진행하겠습니다.

---

### 즉시실행함수(IIFE)

```javascript
(function(){
  console.log('jquery Go!');
})();
```

위 코드의 형태는 즉시실행함수의 코드형태입니다.
함수 표현(Function expression)은 함수를 정의하고, 변수에 함수를 저장하고 실행하는 과정을 거칩니다. 
하지만 즉시 실행 함수는 함수를 정의하고 바로 실행하여 이러한 과정을 거치지 않는 특징이 있습니다. 
함수를 정의하자마자 바로 호출하는 것을 즉시 실행 함수라고 이해하면 편합니다.

즉시실행함수를 사용하는 방법은 크게 3가지 방법이 있습니다.

```javascript
(function(/*인자*/){ /*필요내용 작성 */ })(/*인자값*/);		// 방법 1
(function(/*인자*/){ /*필요내용 작성 */ }(/*인자값*/));		// 방법 2
!function(/*인자*/){ /*필요내용 작성 */ }(/*인자값*/);			// 방법 3
```

위 3가지 방법 외에도 몇가지 방법들이 존재하지만 결과는 모두 동일합니다.
즉시실행함수를 사용하는 이유는 함수를 작성하고 별도로 호출하여 사용하지 않아도 될때 사용하는 것이 가장 큰 특징으로 볼 수 있습니다.

```javascript
var mySquare = (function (x) {
    return x*x;
})(2);								// 변수 'mySquare'에 대입된 함수의 인자 'x'의 값을 2로 할당

console.log(mySquare);
```

즉시 실행함수도 함수의 종류중에 하나이기 때문에 변수에 저장하여 사용하는 것도 가능합니다. 
그렇다면 즉시실행함수는 왜 어떻게 사용하는 것일까요?

---

#### 초기화

즉시 실행 함수는 한 번의 실행만 필요로 하는 초기화 코드 부분에 많이 사용됩니다.
**변수를 전역(global scope)으로 선언하는 것을 피하기 위해서 입니다. **
전역에 변수를 추가하지 않아도 되기 때문에 코드 충돌 없이 구현 할 수 있어, 
플러그인이나 라이브러리 등을 만들 때 많이 사용됩니다.

```javascript
var initText;

(function (number) {
    var textList = ["is Odd Text", "is Even Text"];
    if (number % 2 == 0) {
        initText = textList[1];
    } else {
        initText = textList[0];
    }
})(5);
 
console.log(initText);
console.log(textList);
```

전역에 textList가 저장되지 않고, initText만 초기화 된 것을 확인 할 수 있습니다. 
또한 textList는 지역 변수로, 전역 변수와 충돌없이 초기화 할 수 있게 됩니다.
변수의 범위(**scope**)의 내용은 다음시간에 설명드리도록 하겠습니다.

---

#### 라이브러리 전역 변수의 충돌

```javascript
(function ($) {
    // $ 는 jQuery object
})(jQuery);
```

위 코드는 실제로 jQuery코드의 작성에서 사용하는 형태입니다.

Query나 Prototype 라이브러리는 동일한 $라는 전역 변수를 사용합니다. 
만약, 이 두개의 라이브러리를 같이 사용한다면 $ 변수 충돌이 생기게 됩니다.

**즉시 실행 함수를 사용하여 $ 전역 변수의 충돌을 피할 수 있습니다.**

---



